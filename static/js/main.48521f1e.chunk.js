(this["webpackJsonpmovies-test-app"]=this["webpackJsonpmovies-test-app"]||[]).push([[0],{47:function(e,t,n){},49:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),s=n(21),i=n.n(s),o=(n(47),n(16)),l=n.n(o),u=n(19),j=n(8),h=n(9),p=n(12),d=n(11),v=(n(49),n(10)),b="SET_ALL_MOVIES",m=function(e){return{type:b,payload:e}},O=n(39),f="https://wookie.codesubmit.io/",x=n.n(O).a.create({baseURL:f,headers:{Authorization:"Bearer Wookie2019"},responseType:"json"}),g=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f+"movies".concat(t?"?q="+t:""),e.prev=1,e.next=4,x.get(n);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),y=n(3),w=(n(73),n(74),n(75),n(15)),N=function(e){var t=e.movie;return Object(r.jsx)(w.b,{to:"movie/".concat(t.id),className:"movie-preview-item",children:Object(r.jsx)("img",{src:t.backdrop,alt:t.title})})},k=n(40),S=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={page:0,nextTransform:"",rowWidth:0,rowChildrenSumWidth:0},e.rowElement=c.createRef(),e.nextClick=function(){e.setState({page:e.state.page+1},(function(){return e.setTransform()}))},e.prevClick=function(){e.setState({page:e.state.page-1},(function(){return e.setTransform()}))},e.setTransform=function(){e.setState({nextTransform:"translateX(-".concat(e.state.rowWidth*e.state.page,"px)")})},e.setElementsSizes=function(){if(e.rowElement&&e.rowElement.current){var t=e.rowElement.current.children.length,n=e.rowElement.current.children[0].offsetWidth;e.setState({rowWidth:e.rowElement.current.offsetWidth,rowChildrenSumWidth:t*n},(function(){return e.setTransform()}))}},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setElementsSizes(),window.addEventListener("resize",Object(k.debounce)(this.setElementsSizes,500))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setElementsSizes)}},{key:"render",value:function(){var e=this.props,t=e.genre,n=e.movies,c=this.state,a=c.page,s=c.nextTransform,i=c.rowWidth,o=c.rowChildrenSumWidth;return Object(r.jsxs)("div",{className:"genre-row",children:[Object(r.jsx)("h2",{children:t}),Object(r.jsxs)("div",{className:"row-wrapper",children:[Object(r.jsxs)("div",{className:"arrows",children:[a>0&&Object(r.jsx)("div",{onClick:this.prevClick,className:"arrow prev",children:Object(r.jsx)("img",{src:"https://www.flaticon.com/svg/static/icons/svg/271/271220.svg",alt:"prev"})}),i*(a+1)<o&&Object(r.jsx)("div",{onClick:this.nextClick,className:"arrow next",children:Object(r.jsx)("img",{src:"https://www.flaticon.com/svg/static/icons/svg/271/271228.svg",alt:"next"})})]}),Object(r.jsx)("div",{ref:this.rowElement,className:"row",style:{transform:s},children:n.map((function(e,t){return Object(r.jsx)(N,{movie:e},t)}))})]})]})}}]),n}(c.Component),E=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.movie.moviesByGenre;return Object(r.jsx)("div",{className:"home-scene",children:Object(r.jsx)("div",{className:"container rows-container",children:e&&e.map((function(e,t){return Object(r.jsx)(S,{genre:e.genre,movies:e.movies},t)}))})})}}]),n}(c.Component),C=Object(v.b)((function(e){return{movie:e.movie}}))(E),M=(n(80),n(81),function(e){var t=e.percent;return Object(r.jsxs)("div",{className:"stars-bar-component",children:[Object(r.jsx)(T,{type:"gray"}),Object(r.jsx)(T,{type:"yellow",percent:t})]})}),T=function(e){var t=e.type,n=e.percent;return Object(r.jsxs)("div",{className:"stars-bar ".concat(t),style:{width:"".concat(n,"%")},children:[Object(r.jsx)("div",{className:"star",children:Object(r.jsx)("div",{className:"clipboard"})}),Object(r.jsx)("div",{className:"star",children:Object(r.jsx)("div",{className:"clipboard"})}),Object(r.jsx)("div",{className:"star",children:Object(r.jsx)("div",{className:"clipboard"})}),Object(r.jsx)("div",{className:"star",children:Object(r.jsx)("div",{className:"clipboard"})}),Object(r.jsx)("div",{className:"star",children:Object(r.jsx)("div",{className:"clipboard"})})]})},D=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={currentMovie:{}},e.getMovie=function(){var t=e.props.movie,n=t&&t.getMovieObj,r=e.props.match.params.id;e.setState({currentMovie:n[r]})},e}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.match.params.id!==this.props.match.params.id&&this.getMovie()}},{key:"componentDidMount",value:function(){this.getMovie()}},{key:"render",value:function(){var e=this.state.currentMovie,t=e.imdb_rating&&e.imdb_rating.toFixed(1),n=10*t,c=e.released_on&&new Date(e.released_on);return Object(r.jsx)("div",{className:"movie-scene",children:Object(r.jsxs)("div",{className:"container movie-container",children:[Object(r.jsx)("div",{className:"poster-block",children:Object(r.jsx)("img",{src:e.poster,alt:e.title})}),Object(r.jsxs)("div",{className:"info-block",children:[Object(r.jsxs)("div",{className:"head",children:[Object(r.jsxs)("h2",{children:[e.title,"\xa0",Object(r.jsxs)("span",{children:["(",t,")"]})]}),Object(r.jsx)(M,{percent:n})]}),Object(r.jsxs)("div",{className:"sub-info",children:[Object(r.jsxs)("div",{className:"year",children:[Object(r.jsx)("span",{children:c&&c.getFullYear()}),Object(r.jsx)("span",{children:e.length}),Object(r.jsx)("span",{children:e.director})]}),Object(r.jsxs)("div",{className:"cast",children:[Object(r.jsx)("span",{children:"Cast:\xa0"}),e.cast&&e.cast.map((function(e,t){return Object(r.jsx)("span",{children:e},t)}))]})]}),Object(r.jsx)("p",{className:"overview",children:e.overview})]})]})})}}]),n}(c.Component),W=Object(y.f)(Object(v.b)((function(e){return{movie:e.movie}}))(D)),A=(n(82),"SET_SEARCH_QUERY"),L="SET_SEARCH_RESULTS",_=function(e){return{type:A,payload:e}},R=function(e){return{type:L,payload:e}},I=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).getData=Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=e.props.search.query)){t.next=7;break}return t.next=5,g(n);case 5:r=t.sent,e.setSearchResultsToStore(r.data.movies);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.setSearchResultsToStore=function(t){e.props.dispatch(R(t))},e}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.search.query!==this.props.search.query&&this.getData()}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.props.dispatch(_("")),this.props.dispatch(R([]))}},{key:"render",value:function(){var e=this.props.search.results;return Object(r.jsx)("div",{className:"search-scene",children:e.length?Object(r.jsx)("div",{className:"container search-results-container",children:e.map((function(e,t){return Object(r.jsx)(N,{movie:e},t)}))}):Object(r.jsx)("p",{className:"no-results",children:"No Results"})})}}]),n}(c.Component),q=Object(v.b)((function(e){return{search:e.search}}))(I),z=(n(83),n(84),function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).onChange=function(t){var n=t.target.value;e.props.dispatch(_(n)),e.searchListener(n)},e.searchListener=function(t){var n=e.props.history.location.pathname;t.trim().length&&"/search"!==n&&e.props.history.push("/search"),t.trim().length||"/search"!==n||e.props.history.goBack()},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.search.query;return Object(r.jsxs)("div",{className:"search-input",children:[Object(r.jsx)("img",{src:"https://img.icons8.com/search",alt:"search"}),Object(r.jsx)("input",{type:"text",onChange:this.onChange,value:e})]})}}]),n}(c.Component)),B=Object(y.f)(Object(v.b)((function(e){return{search:e.search}}))(z)),U=function(e){return Object(r.jsx)("header",{className:"app-header",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(w.b,{to:"/",className:"logo",children:Object(r.jsxs)("span",{children:["WOOKIE ",Object(r.jsx)("br",{})," MOVIES"]})}),Object(r.jsx)(B,{})]})})},F=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={initIsDone:!1},e.getData=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g();case 3:n=t.sent,e.setMoviesToStore(n.data.movies),e.setState({initIsDone:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.setMoviesToStore=function(t){e.props.dispatch(m(t))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(U,{}),this.state.initIsDone&&Object(r.jsxs)(y.c,{children:[Object(r.jsx)(y.a,{exact:!0,path:"/",component:C}),Object(r.jsx)(y.a,{exact:!0,path:"/movie/:id",component:W}),Object(r.jsx)(y.a,{exact:!0,path:"/search",component:q})]})]})}}]),n}(c.Component),G=Object(v.b)()(F),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},J=n(41),P=n(17),V=n(28),Y={allMovies:[],moviesByGenre:[],getMovieObj:{}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var n=[],r={};t.payload.forEach((function(e){r[e.id]=e,e.genres.forEach((function(e){-1===n.indexOf(e)&&(n=[].concat(Object(V.a)(n),[e]))}))}));var c=n.map((function(e){var n=[];return t.payload.forEach((function(t){-1!==t.genres.indexOf(e)&&(n=[].concat(Object(V.a)(n),[t]))})),{genre:e,movies:n}}));return Object(P.a)(Object(P.a)({},e),{},{allMovies:t.payload,moviesByGenre:c,getMovieObj:r});default:return e}},Q={query:"",results:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(P.a)(Object(P.a)({},e),{},{query:t.payload});case L:return Object(P.a)(Object(P.a)({},e),{},{results:t.payload});default:return e}},Z=Object(J.a)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{movie:K(e.movie,t),search:X(e.search,t)}}});i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(v.a,{store:Z,children:Object(r.jsx)(w.a,{basename:"/movies-test-app",children:Object(r.jsx)(G,{})})})}),document.getElementById("root")),H()}},[[85,1,2]]]);
//# sourceMappingURL=main.48521f1e.chunk.js.map